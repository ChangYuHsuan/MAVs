

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head><div class = "head"> </div>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parallelism &mdash; Artelys Knitro 10.3 User&#39;s Manual</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/Artelys_theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Artelys Knitro 10.3 User&#39;s Manual" href="../index.html"/>
        <link rel="up" title="User guide" href="../2_userGuide.html"/>
        <link rel="next" title="The Knitro-Tuner" href="tuner.html"/>
        <link rel="prev" title="Feasibility and infeasibility" href="feasibility.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Artelys Knitro User's Manual
          

          
          </a>

          
            
            
              <div class="version">
                10.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../2_userGuide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gettingStarted.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="knitroOptions.html">Setting options</a></li>
<li class="toctree-l2"><a class="reference internal" href="derivatives.html">Derivatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="multistart.html">Multistart</a></li>
<li class="toctree-l2"><a class="reference internal" href="minlp.html">Mixed-integer nonlinear programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="complementarity.html">Complementarity constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="ktrlsq.html">Nonlinear Least-Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="feasibility.html">Feasibility and infeasibility</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Parallelism</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parallel-finite-difference-gradients">Parallel Finite-Difference Gradients</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-multistart">Parallel Multistart</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-algorithms">Parallel Algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-tuning">Parallel Tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-basic-linear-algebra-subroutine-blas">Parallel Basic Linear Algebra Subroutine (BLAS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-sparse-linear-system-solves">Parallel Sparse Linear System Solves</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-options">Parallel Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ampl-example">AMPL example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-example">C example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tuner.html">The Knitro-Tuner</a></li>
<li class="toctree-l2"><a class="reference internal" href="termination.html">Termination criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="obtainingInformation.html">Obtaining information</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="otherProgInterfaces.html">Other programmatic interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="specialProblems.html">Special problem classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html">Tips and tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3_referenceManual.html">Reference manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Artelys Knitro User's Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../2_userGuide.html">User guide</a> &raquo;</li>
      
    <li>Parallelism</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parallelism">
<span id="sec-parallelism"></span><h1>Parallelism</h1>
<p id="index-0">Knitro offers several features to exploit parallel computations
on shared memory multi-processor machines.  These features are
implemented using OpenMP.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The parallel features offered through Knitro are not available
through all interfaces.  Check with your modeling language vendor
to see if these features are included.  The parallel features are
included in the AMPL interface, the object-oriented interfaces,
and through the callable library. Parallel features are also
available through the MATLAB interface, but some may be less efficient
in this environment.</p>
</div>
<p>Knitro offers the following parallel features:</p>
<div class="section" id="parallel-finite-difference-gradients">
<h2>Parallel Finite-Difference Gradients</h2>
<p>As described in <a class="reference internal" href="derivatives.html#sec-derivatives"><span class="std std-ref">Derivatives</span></a>, if you are unable to provide the exact
first derivatives, Knitro offers the option to approximate
first derivatives using either a forward or central finite-difference approach,
by setting the option <a class="reference internal" href="../3_referenceManual/userOptions.html#gradopt" title="gradopt"><code class="xref c c-type docutils literal"><span class="pre">gradopt</span></code></a>.  Knitro will compute these finite
difference gradient values in parallel if the user specifies that Knitro should
use multiple threads through the option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> (see below).
This parallel feature only applies to first derivative finite-difference
evaluations.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the Knitro-MATLAB interface, the parallel finite-difference feature is
controlled by the <em>UseParallel</em> MATLAB option, rather than the Knitro
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> option.  See <a class="reference internal" href="../3_referenceManual/knitromatlabReference.html#knitromatlabreference"><span class="std std-ref">Knitro / MATLAB reference</span></a> for
more information.</p>
</div>
</div>
<div class="section" id="parallel-multistart">
<h2>Parallel Multistart</h2>
<p>The multistart procedure described in <a class="reference internal" href="multistart.html#sec-multistart"><span class="std std-ref">Multistart</span></a>
can run in parallel by setting <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> to use
multiple threads.</p>
<p>When the multistart procedure is run in parallel, Knitro
will produce the same sequence of initial points and
solves that you see when running multistart sequentially
(though, perhaps, not in the same order).</p>
<p>Therefore, as long as you run multistart to completion (<a class="reference internal" href="../3_referenceManual/userOptions.html#ms_terminate" title="ms_terminate"><code class="xref c c-type docutils literal"><span class="pre">ms_terminate</span></code></a> =0)
and use the deterministic option (<a class="reference internal" href="../3_referenceManual/userOptions.html#ms_deterministic" title="ms_deterministic"><code class="xref c c-type docutils literal"><span class="pre">ms_deterministic</span></code></a> =1),
you should visit
the same initial points encountered when running multistart sequentially,
and get the same final solution. By default <a class="reference internal" href="../3_referenceManual/userOptions.html#ms_terminate" title="ms_terminate"><code class="xref c c-type docutils literal"><span class="pre">ms_terminate</span></code></a> =0
and <a class="reference internal" href="../3_referenceManual/userOptions.html#ms_deterministic" title="ms_deterministic"><code class="xref c c-type docutils literal"><span class="pre">ms_deterministic</span></code></a> =1 so that the parallel multistart produces
the same solution as the sequential multistart.</p>
<p>However, if <a class="reference internal" href="../3_referenceManual/userOptions.html#ms_deterministic" title="ms_deterministic"><code class="xref c c-type docutils literal"><span class="pre">ms_deterministic</span></code></a> =0, or <a class="reference internal" href="../3_referenceManual/userOptions.html#ms_terminate" title="ms_terminate"><code class="xref c c-type docutils literal"><span class="pre">ms_terminate</span></code></a> &gt;0,
there is no guarantee that the final solution reported by multistart will
be the same when run in parallel compared to the solution when run sequentially,
and even the parallel solution may change when run at different times.</p>
<p>The option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_msnumthreads" title="par_msnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_msnumthreads</span></code></a> can be used to set the number
of threads used by the multistart procedure. For instance, if
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> =16 and <a class="reference internal" href="../3_referenceManual/userOptions.html#par_msnumthreads" title="par_msnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_msnumthreads</span></code></a> =8,
Knitro will run 8 solves in parallel and each solve will be
allocated 2 threads.</p>
</div>
<div class="section" id="parallel-algorithms">
<h2>Parallel Algorithms</h2>
<p>If the user option <code class="xref c c-type docutils literal"><span class="pre">alg</span></code> is set to <code class="xref c c-macro docutils literal"><span class="pre">multi</span></code>, then Knitro
will run all four algorithms (see <a class="reference internal" href="algorithms.html#sec-algorithms"><span class="std std-ref">Algorithms</span></a>).  When
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> is set to use multiple threads, the four Knitro
algorithms will run in parallel.  The termination of the parallel algorithms
procedure is controlled by the user option <a class="reference internal" href="../3_referenceManual/userOptions.html#ma_terminate" title="ma_terminate"><code class="xref c c-type docutils literal"><span class="pre">ma_terminate</span></code></a>.  See
<a class="reference internal" href="algorithms.html#sec-algorithms"><span class="std std-ref">Algorithms</span></a> for more details on the multi algorithm procedure.</p>
</div>
<div class="section" id="parallel-tuning">
<h2>Parallel Tuning</h2>
<p><a class="reference internal" href="tuner.html#sec-tuner"><span class="std std-ref">The Knitro-Tuner</span></a> can help you identify some non-default options settings that may improve performance on a particular model or set of models.
When <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> is set to use multiple threads, Knitro will test the Tuner options in parallel.</p>
</div>
<div class="section" id="parallel-basic-linear-algebra-subroutine-blas">
<h2>Parallel Basic Linear Algebra Subroutine (BLAS)</h2>
<p>The Knitro algorithms - in particular the interior-point/barrier algorithms -
rely heavily on BLAS operations (e.g. dot products of vectors, dense matrix-matrix and
matrix-vector products, etc.).  For large-scale problems, these operations
may often take 35%-50% of the overall solution time, and sometimes more.</p>
<p>These operations can be computed in parallel using multiple threads by
setting the user option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a> &gt;1 (by default
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a> =1).  This option is currently only active when
using the default Intel BLAS (<a class="reference internal" href="../3_referenceManual/userOptions.html#blasoption" title="blasoption"><code class="xref c c-type docutils literal"><span class="pre">blasoption</span></code></a> =1) provided with Knitro.</p>
</div>
<div class="section" id="parallel-sparse-linear-system-solves">
<h2>Parallel Sparse Linear System Solves</h2>
<p>The primary computational cost each iteration in the Knitro interior-point
algorithms is the solution of a linear system of equations. The <a class="reference internal" href="../3_referenceManual/userOptions.html#linsolver" title="linsolver"><code class="xref c c-type docutils literal"><span class="pre">linsolver</span></code></a>
user option specifies the linear system, solver to use. You can
use the multi-threaded Intel MKL PARDISO solver in Knitro by
choosing <a class="reference internal" href="../3_referenceManual/userOptions.html#linsolver" title="linsolver"><code class="xref c c-type docutils literal"><span class="pre">linsolver</span></code></a> =6.  By default the Intel MKL
PARDISO solver will use one thread, however, it can solve linear systems in
parallel by choosing <a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a> &gt;1 (in combination with
<a class="reference internal" href="../3_referenceManual/userOptions.html#linsolver" title="linsolver"><code class="xref c c-type docutils literal"><span class="pre">linsolver</span></code></a> =6).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Generally you should not use BOTH parallel BLAS and a parallel linear solver
as they may conflict with each other.  If <a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a> &gt;1
one should set <a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a> =1 and vise versa.</p>
</div>
</div>
<div class="section" id="parallel-options">
<h2>Parallel Options</h2>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a></td>
<td>Specifies the number of threads to use for parallel BLAS
(when <a class="reference internal" href="../3_referenceManual/userOptions.html#blasoption" title="blasoption"><code class="xref c c-type docutils literal"><span class="pre">blasoption</span></code></a> =1)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a></td>
<td>Specifies the number of threads to use for parallel linear
system solves (when <a class="reference internal" href="../3_referenceManual/userOptions.html#linsolver" title="linsolver"><code class="xref c c-type docutils literal"><span class="pre">linsolver</span></code></a> =6)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a></td>
<td>Specifies the number of threads to use for all
parallel features</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../3_referenceManual/userOptions.html#par_concurrent_evals" title="par_concurrent_evals"><code class="xref c c-type docutils literal"><span class="pre">par_concurrent_evals</span></code></a></td>
<td>Whether or not to allow concurrent evaluations</td>
</tr>
</tbody>
</table>
<p>The user option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> is used to determine the number of threads
Knitro can use for all parallel computations.  Knitro will decide how to apply the threads.
If  <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> &gt; 0, then
the number of threads is determined by the value of <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a>.
If <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> = 0, then the number of threads is determined by the
value of the environment variables <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal"><span class="pre">OMP_NUM_THREADS</span></code>.  If
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> = 0 and <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal"><span class="pre">OMP_NUM_THREADS</span></code> is not set, then the
number of threads to use will be automatically deteremined by OpenMP.  If
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> &lt; 0, Knitro will run in sequential mode.</p>
<p>Generally, if you are unsure of how best to apply parallel threads in Knitro
you should just set the general option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a> to the maximum
number of threads you want Knitro to use, and leave <a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a> and
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a> at their default values.
Then Knitro will try to allocate work to these different
threads in the most sensible way.  Typically, if you are performing a single solve,
the threads will get applied to the BLAS operations.  If, for example,
you are using multi-start then the multi-start solves are run in
parallel but BLAS is sequential (typically applying 2 layers of parallelism is
not good).</p>
<p>The options <a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a> and <a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a> allow
the expert user more fine-grained control over parallelism of these specific features.</p>
<p>The user option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a> is used to determine the number of threads
Knitro can use for parallel BLAS computations.  This option is only active when using
the default Intel BLAS (<a class="reference internal" href="../3_referenceManual/userOptions.html#blasoption" title="blasoption"><code class="xref c c-type docutils literal"><span class="pre">blasoption</span></code></a> =1).
The domain specific <a class="reference internal" href="../3_referenceManual/userOptions.html#par_blasnumthreads" title="par_blasnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_blasnumthreads</span></code></a>,
will override the general thread setting specified by <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a>
for BLAS operations.</p>
<p>The user option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a> is used to determine the number of threads
Knitro can use for parallel linear system solves.  This option is only active when using
the default Intel MKL PARDISO linear solver (<a class="reference internal" href="../3_referenceManual/userOptions.html#linsolver" title="linsolver"><code class="xref c c-type docutils literal"><span class="pre">linsolver</span></code></a> =6).
The domain specific <a class="reference internal" href="../3_referenceManual/userOptions.html#par_lsnumthreads" title="par_lsnumthreads"><code class="xref c c-type docutils literal"><span class="pre">par_lsnumthreads</span></code></a>,
will override the general thread setting specified by <a class="reference internal" href="../3_referenceManual/userOptions.html#par_numthreads" title="par_numthreads"><code class="xref c c-type docutils literal"><span class="pre">par_numthreads</span></code></a>
for linear system solve operations.</p>
<p>The user option <a class="reference internal" href="../3_referenceManual/userOptions.html#par_concurrent_evals" title="par_concurrent_evals"><code class="xref c c-type docutils literal"><span class="pre">par_concurrent_evals</span></code></a> determines whether or not the user
provided callback functions used for function and derivative evaluations can
take place concurrently in parallel (for possibly different values of &#8220;<em>x</em>&#8221;).
If it is not safe to have concurrent evaluations, then setting
<a class="reference internal" href="../3_referenceManual/userOptions.html#par_concurrent_evals" title="par_concurrent_evals"><code class="xref c c-type docutils literal"><span class="pre">par_concurrent_evals</span></code></a> =0, will put these evaluations in a critical region
so that only one evaluation can take place at a time.  If <a class="reference internal" href="../3_referenceManual/userOptions.html#par_concurrent_evals" title="par_concurrent_evals"><code class="xref c c-type docutils literal"><span class="pre">par_concurrent_evals</span></code></a> =1
then concurrent evaluations are allowed when Knitro is run in parallel, and it
is the responsibility of the user to ensure that these evaluations are stable.</p>
<p>Preventing concurrent evaluations will decrease the efficiency of the parallel features,
particularly when the evaluations are expensive or there are many threads and these
evaluations create a bottleneck.</p>
</div>
<div class="section" id="ampl-example">
<h2>AMPL example</h2>
<p>Let us consider again our AMPL example from Section <a class="reference internal" href="gettingStarted/startAmpl.html#getstartampl"><span class="std std-ref">Getting started with AMPL</span></a>
and run it with the parallel multi algorithm procedure.  We specify that
Knitro should run in parallel with four threads (one for each algorithm):</p>
<div class="highlight-none"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span>ampl: reset;
ampl: option solver knitroampl;
ampl: option knitro_options &quot;alg=5 ma_terminate=0 par_numthreads=4&quot;;
ampl: model testproblem.mod;
ampl: solve;
</pre></div>
</td></tr></table></div>
<p>The Knitro log printed to the screen shows the results of each algorithm
(one per line):</p>
<div class="highlight-none"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre></div></td><td class="code"><div class="highlight"><pre><span></span>=======================================
          Commercial License
         Artelys Knitro 10.0.0
=======================================

Knitro presolve eliminated 0 variables and 0 constraints.

algorithm:            5
datacheck:            0
hessian_no_f:         1
ma_terminate:         0
par_concurrent_evals: 0
par_numthreads:       4

Problem Characteristics                    ( Presolved)
-----------------------
Objective goal:  Minimize
Number of variables:                     3 (         3)
    bounded below:                       3 (         3)
    bounded above:                       0 (         0)
    bounded below and above:             0 (         0)
    fixed:                               0 (         0)
    free:                                0 (         0)
Number of constraints:                   2 (         2)
    linear equalities:                   1 (         1)
    nonlinear equalities:                0 (         0)
    linear inequalities:                 0 (         0)
    nonlinear inequalities:              1 (         1)
    range:                               0 (         0)
Number of nonzeros in Jacobian:          6 (         6)
Number of nonzeros in Hessian:           5 (         5)

Knitro running multiple algorithms in parallel with 4 threads.

   Alg      Status    Objective      FeasError   OptError   Real Time
--------  --------- --------------  ----------  ---------- ----------
       2         0    9.360000e+02   0.000e+00   1.945e-07      0.002
       1         0    9.360000e+02   6.738e-08   6.614e-08      0.002
       4         0    9.360000e+02   0.000e+00   2.387e-12      0.005
       3         0    9.360000e+02   0.000e+00   0.000e+00      0.010
Multiple algorithms stopping, all solves have completed.

EXIT: Locally optimal solution found.

Final Statistics
----------------
Final objective value               =   9.35999997829394e+02
Final feasibility error (abs / rel) =   6.74e-08 / 5.18e-09
Final optimality error  (abs / rel) =   6.61e-08 / 4.13e-09
# of iterations                     =         16
# of CG iterations                  =         12
# of function evaluations           =         28
# of gradient evaluations           =         24
# of Hessian evaluations            =         16
Total program time (secs)           =       0.01169 (     0.023 CPU time)

===============================================================================

Knitro 10.0.0: Locally optimal or satisfactory solution.
objective 935.9999978293937; feasibility error 6.74e-08
16 iterations; 28 function evaluations
</pre></div>
</td></tr></table></div>
<p>As can be seen, all four Knitro algorithms solve the problem and find the same
local solution.  However, the two interior-point algorithms (<code class="xref c c-type docutils literal"><span class="pre">alg=1</span></code> and <code class="xref c c-type docutils literal"><span class="pre">2</span></code>)
are the fastest.</p>
</div>
<div class="section" id="c-example">
<h2>C example</h2>
<p>As an example, the C example can also be easily modified to enable
parallel multi-algorithms by adding the following lines before the
call to <a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_init_problem" title="KTR_init_problem"><code class="xref c c-func docutils literal"><span class="pre">KTR_init_problem()</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">parallelism</span>
<span class="k">if</span> <span class="p">(</span><span class="n">KTR_set_int_param_by_name</span> <span class="p">(</span><span class="n">kc</span><span class="p">,</span> <span class="s2">&quot;algorithm&quot;</span><span class="p">,</span> <span class="n">KTR_ALG_MULTI</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">exit</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">KTR_set_int_param_by_name</span> <span class="p">(</span><span class="n">kc</span><span class="p">,</span> <span class="s2">&quot;ma_terminate&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">exit</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">KTR_set_int_param_by_name</span> <span class="p">(</span><span class="n">kc</span><span class="p">,</span> <span class="s2">&quot;par_numthreads&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">exit</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
</pre></div>
</div>
<p>Again, running this example we get a Knitro log that looks simlar to
what we observed with AMPL.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tuner.html" class="btn btn-neutral float-right" title="The Knitro-Tuner" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="feasibility.html" class="btn btn-neutral" title="Feasibility and infeasibility" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Artelys.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'10.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>