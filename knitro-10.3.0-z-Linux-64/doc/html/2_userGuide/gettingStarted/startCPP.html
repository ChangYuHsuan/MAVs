

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head><div class = "head"> </div>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting started with the object-oriented interface &mdash; Artelys Knitro 10.3 User&#39;s Manual</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/Artelys_theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Artelys Knitro 10.3 User&#39;s Manual" href="../../index.html"/>
        <link rel="up" title="Getting started" href="../gettingStarted.html"/>
        <link rel="next" title="Getting started with R" href="startR.html"/>
        <link rel="prev" title="Getting started with the callable library" href="startCallableLibrary.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Artelys Knitro User's Manual
          

          
          </a>

          
            
            
              <div class="version">
                10.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../1_introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../2_userGuide.html">User guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../gettingStarted.html">Getting started</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="startAmpl.html">Getting started with AMPL</a></li>
<li class="toctree-l3"><a class="reference internal" href="startMatlab.html">Getting started with MATLAB</a></li>
<li class="toctree-l3"><a class="reference internal" href="startCallableLibrary.html">Getting started with the callable library</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Getting started with the object-oriented interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#first-example">First example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#further-information">Further information</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-examples">Additional examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="startR.html">Getting started with R</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../knitroOptions.html">Setting options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../derivatives.html">Derivatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multistart.html">Multistart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../minlp.html">Mixed-integer nonlinear programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../complementarity.html">Complementarity constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ktrlsq.html">Nonlinear Least-Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feasibility.html">Feasibility and infeasibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallelism.html">Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tuner.html">The Knitro-Tuner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../termination.html">Termination criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="../obtainingInformation.html">Obtaining information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../callbacks.html">Callbacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../otherProgInterfaces.html">Other programmatic interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../specialProblems.html">Special problem classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tips.html">Tips and tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../3_referenceManual.html">Reference manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Artelys Knitro User's Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../2_userGuide.html">User guide</a> &raquo;</li>
      
          <li><a href="../gettingStarted.html">Getting started</a> &raquo;</li>
      
    <li>Getting started with the object-oriented interface</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started-with-the-object-oriented-interface">
<span id="startcpp"></span><h1>Getting started with the object-oriented interface</h1>
<p>The Knitro object-oriented interface provides an object-oriented wrapper around
the Knitro callable library. The interface is available in C++, C#, and Java.
This document focuses on the C++ version of the interface. The interfaces are
the same in functionality, differing only in language syntax and data types used
in functions (e.g., std::vector&lt;&gt; in C++, IList&lt;&gt; in C#, and List&lt;&gt; in Java).
Examples for each of the languages are available in the Knitro examples folders.</p>
<p>The C++ object-oriented interface is a header-only interface. Complete source
code for the interface is included with Knitro for informational purposes.
Usage requires including the <code class="file docutils literal"><span class="pre">knitro.h</span></code> header within the <code class="file docutils literal"><span class="pre">include</span></code> directory
of Knitro and linking against the appropriate Knitro library file within the
<code class="file docutils literal"><span class="pre">lib</span></code> directory of Knitro.</p>
<p>The object-oriented API is used to solve an optimization problem through a
sequence of function calls:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">KTRIProblem*</span> <span class="pre">instance</span></code>: create an instance of the problem to be solved by Knitro. The class is user-defined, inherits from the KTRIProblem class, and defines the problem characteristics.</li>
<li><code class="docutils literal"><span class="pre">KTRSolver</span> <span class="pre">solver(instance)</span></code>: load the problem definition into the Knitro solver and check out a Knitro license.</li>
<li><code class="docutils literal"><span class="pre">solver.solve()</span></code>: solve the problem, with output stored in the <code class="docutils literal"><span class="pre">solver</span></code> object.</li>
</ul>
<p>The example below shows how to define a problem and class and use these function calls.</p>
<div class="section" id="first-example">
<h2>First example</h2>
<p>The follwing defines the same toy problem solved using AMPL, MATLAB, and the
callable library.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;KTRSolver.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;KTRProblem.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="nc">ProblemExample</span> <span class="o">:</span> <span class="k">public</span> <span class="n">knitro</span><span class="o">::</span><span class="n">KTRProblem</span> <span class="p">{</span>
<span class="k">private</span><span class="o">:</span>
    <span class="c1">// objective properties</span>
    <span class="kt">void</span> <span class="n">setObjectiveProperties</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">setObjType</span><span class="p">(</span><span class="n">knitro</span><span class="o">::</span><span class="n">KTREnums</span><span class="o">::</span><span class="n">ObjectiveType</span><span class="o">::</span><span class="n">ObjGeneral</span><span class="p">);</span>
        <span class="n">setObjGoal</span><span class="p">(</span><span class="n">knitro</span><span class="o">::</span><span class="n">KTREnums</span><span class="o">::</span><span class="n">ObjectiveGoal</span><span class="o">::</span><span class="n">Minimize</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// variable bounds. All variables 0 &lt;= x.</span>
    <span class="kt">void</span> <span class="n">setVariableProperties</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">setVarLoBnds</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// constraint properties</span>
    <span class="kt">void</span> <span class="n">setConstraintProperties</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// set constraint types</span>
        <span class="n">setConTypes</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">knitro</span><span class="o">::</span><span class="n">KTREnums</span><span class="o">::</span><span class="n">ConstraintType</span><span class="o">::</span><span class="n">ConGeneral</span><span class="p">);</span>
        <span class="n">setConTypes</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">knitro</span><span class="o">::</span><span class="n">KTREnums</span><span class="o">::</span><span class="n">ConstraintType</span><span class="o">::</span><span class="n">ConGeneral</span><span class="p">);</span>

        <span class="c1">// set constraint lower bounds to zero for all variables</span>
        <span class="n">setConLoBnds</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>

        <span class="c1">// set constraint upper bounds</span>
        <span class="n">setConUpBnds</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">);</span>
        <span class="n">setConUpBnds</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">KTR_INFBOUND</span><span class="p">);</span>
    <span class="p">}</span>

  <span class="k">public</span><span class="o">:</span>
      <span class="c1">// constructor: pass number of variables and constraints to base class.</span>
      <span class="c1">// 3 variables, 2 constraints.</span>
      <span class="n">ProblemExample</span><span class="p">()</span> <span class="o">:</span> <span class="n">KTRProblem</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// set problem properties in constructor</span>
          <span class="n">setObjectiveProperties</span><span class="p">();</span>
          <span class="n">setVariableProperties</span><span class="p">();</span>
          <span class="n">setConstraintProperties</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="c1">// Objective and constraint evaluation function</span>
      <span class="c1">// overrides KTRIProblem class</span>
      <span class="kt">double</span> <span class="n">evaluateFC</span><span class="p">(</span>
          <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&amp;</span> <span class="n">x</span><span class="p">,</span>
          <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&amp;</span> <span class="n">c</span><span class="p">,</span>
          <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&amp;</span> <span class="n">objGrad</span><span class="p">,</span>
          <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&amp;</span> <span class="n">jac</span><span class="p">)</span> <span class="p">{</span>

          <span class="c1">// constraints</span>
          <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">8.0e0</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mf">14.0e0</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">7.0e0</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mf">56.0e0</span><span class="p">;</span>
          <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mf">25.0e0</span><span class="p">;</span>

          <span class="c1">// return objective function value</span>
          <span class="k">return</span> <span class="mi">1000</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">2.0e0</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
              <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
      <span class="p">}</span>
  <span class="p">};</span>

  <span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
      <span class="c1">// Create a problem instance.</span>
      <span class="n">ProblemExample</span><span class="o">*</span> <span class="n">problem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProblemExample</span><span class="p">();</span>

      <span class="c1">// Create a solver - optional arguments: use numerical derivative evaluation.</span>
      <span class="n">knitro</span><span class="o">::</span><span class="n">KTRSolver</span> <span class="n">solver</span><span class="p">(</span><span class="n">problem</span><span class="p">,</span> <span class="n">KTR_GRADOPT_FORWARD</span><span class="p">,</span> <span class="n">KTR_HESSOPT_BFGS</span><span class="p">);</span>

      <span class="kt">int</span> <span class="n">solveStatus</span> <span class="o">=</span> <span class="n">solver</span><span class="p">.</span><span class="n">solve</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="n">solveStatus</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Knitro failed to solve the problem, final status = &quot;</span><span class="p">;</span>
          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">solveStatus</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Knitro successful, objective is = &quot;</span><span class="p">;</span>
          <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">solver</span><span class="p">.</span><span class="n">getObjValue</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>This is similar to the callable library example. The problem definition is
contained in a class definition and is simpler. Variable and constraint
properties can be defined more compactly; memory for the problem characteristics
does not need to be allocated by the user; and the Jacobian sparsity pattern
is automatically defined as a full matrix because no Jacobian non-zero size
is provided.</p>
<p>The Knitro solver functions are called from the <code class="docutils literal"><span class="pre">KTRSolver</span></code> class. Like the
callable library, the object-oriented interface does not provide automatic
derivatives. Derivatives can be computed manually and defined in the <code class="docutils literal"><span class="pre">KTRProblem</span></code>
class. This is covered in the chapter on <a class="reference internal" href="../derivatives.html#sec-derivatives"><span class="std std-ref">Derivatives</span></a>.</p>
<p>The above example can be compiled and linked against Knitro, and produces
the same output as the callable library output. As in the callable library,
this requires more problem definition than AMPL, such as defining the variable
and constraint types. The object-oriented interface provide ease-of-use over
the callable library with similar functionality and performance.</p>
</div>
<div class="section" id="further-information">
<h2>Further information</h2>
<p>Another chapter of this documentation is dedicated to
the object-oriented interface (<a class="reference internal" href="../../3_referenceManual/ooInterfaceReference.html#sec-oointerfacereference"><span class="std std-ref">Object-oriented interface reference</span></a>). The reference manual chapter
on the callable library (<a class="reference internal" href="../../3_referenceManual/callableLibraryReference.html#chap-callablelibrayreference"><span class="std std-ref">Callable library reference</span></a>) provides information on the callable
library underlying the object-oriented interface.  This section provides a comprehensive
documentation of the Knitro callable library functions, which are accessible
through methods of the KTRSolver class.</p>
<p>Finally, the source code for the object-oriented interface is provided as a
reference. The <code class="file docutils literal"><span class="pre">.h</span></code> header files for the C++ interface document the interface
functionality.</p>
</div>
<div class="section" id="additional-examples">
<h2>Additional examples</h2>
<p>More examples using the object-oriented interface are provided in
the <code class="file docutils literal"><span class="pre">examples/C++</span></code>, <code class="file docutils literal"><span class="pre">examples/CSharp</span></code> and <code class="file docutils literal"><span class="pre">examples/Java</span></code>
directories of the Knitro distribution.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="startR.html" class="btn btn-neutral float-right" title="Getting started with R" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="startCallableLibrary.html" class="btn btn-neutral" title="Getting started with the callable library" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Artelys.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'10.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>