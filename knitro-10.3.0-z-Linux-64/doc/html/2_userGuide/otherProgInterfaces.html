

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head><div class = "head"> </div>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Other programmatic interfaces &mdash; Artelys Knitro 10.3 User&#39;s Manual</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/Artelys_theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Artelys Knitro 10.3 User&#39;s Manual" href="../index.html"/>
        <link rel="up" title="User guide" href="../2_userGuide.html"/>
        <link rel="next" title="Special problem classes" href="specialProblems.html"/>
        <link rel="prev" title="Callbacks" href="callbacks.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Artelys Knitro User's Manual
          

          
          </a>

          
            
            
              <div class="version">
                10.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../1_introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../2_userGuide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gettingStarted.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="knitroOptions.html">Setting options</a></li>
<li class="toctree-l2"><a class="reference internal" href="derivatives.html">Derivatives</a></li>
<li class="toctree-l2"><a class="reference internal" href="multistart.html">Multistart</a></li>
<li class="toctree-l2"><a class="reference internal" href="minlp.html">Mixed-integer nonlinear programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="complementarity.html">Complementarity constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="ktrlsq.html">Nonlinear Least-Squares</a></li>
<li class="toctree-l2"><a class="reference internal" href="algorithms.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="feasibility.html">Feasibility and infeasibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallelism.html">Parallelism</a></li>
<li class="toctree-l2"><a class="reference internal" href="tuner.html">The Knitro-Tuner</a></li>
<li class="toctree-l2"><a class="reference internal" href="termination.html">Termination criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="obtainingInformation.html">Obtaining information</a></li>
<li class="toctree-l2"><a class="reference internal" href="callbacks.html">Callbacks</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Other programmatic interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#knitro-in-a-c-application">Knitro in a C++ application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Knitro in a C# application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#knitro-in-a-java-application">Knitro in a Java application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#knitro-in-a-fortran-application">Knitro in a Fortran application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#knitro-in-a-python-application">Knitro in a Python application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="specialProblems.html">Special problem classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html">Tips and tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="bibliography.html">Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../3_referenceManual.html">Reference manual</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Artelys Knitro User's Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../2_userGuide.html">User guide</a> &raquo;</li>
      
    <li>Other programmatic interfaces</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="other-programmatic-interfaces">
<h1>Other programmatic interfaces</h1>
<p>This chapter discusses interfaces to C++, C#, Java, Fortran
and Python offered by the Knitro callable library.</p>
<div class="section" id="knitro-in-a-c-application">
<h2>Knitro in a C++ application</h2>
<div class="admonition note" id="index-0">
<p class="first admonition-title">Note</p>
<p class="last">C++ driver-based interface has been superseded by C++ object-oriented
interface, see <a class="reference internal" href="../3_referenceManual/ooInterfaceReference.html#sec-oointerfacereference"><span class="std std-ref">Object-oriented interface reference</span></a>. The C++ driver and
examples are not available anymore since Knitro 10.0.</p>
</div>
<p>Calling Knitro from a C++ application follows the same outline
as a C application.     The distribution provides a C++ general test harness
in the directory <code class="file docutils literal"><span class="pre">examples/C++</span></code>. In the example, optimization problems
are coded as subclasses of an abstract interface and compiled as separate shared
objects. A main driver program dynamically loads a problem and sets up
callback mode so Knitro can invoke the
particular problem&#8217;s evaluation methods. The main driver can also use
Knitro to conveniently check partial derivatives against
finite-difference approximations.
It is easy to add more test problems to the test environment.</p>
</div>
<div class="section" id="id1">
<h2>Knitro in a C# application</h2>
<p id="index-1">Calling Knitro from a C# application is similar to using the
object-oriented interface in C++. The primary difference between the C++
and C# version of the object-oriented interface is in the syntax and function
name capitalization. The C# function names are capitalized, and the functions
use <code class="docutils literal"><span class="pre">IList&lt;&gt;</span></code> (implemented as <code class="docutils literal"><span class="pre">List&lt;&gt;</span></code>) for function arguments and return values.</p>
<p>The C# object-oriented interface requires .NET Version 4.0 and up.
The interface uses P/Invoke to call the C Knitro callable library and
convert data and function signatures between C# and C,
and uses <code class="file docutils literal"><span class="pre">knitro.h</span></code> and the <code class="file docutils literal"><span class="pre">knitro.dll</span></code> dynamic library.</p>
<p>Examples of problem definitions and Knitro callbacks in C# can be found
in the example folders distributed with Knitro, and the source code
for the interface is provided for informational purposes.</p>
</div>
<div class="section" id="knitro-in-a-java-application">
<h2>Knitro in a Java application</h2>
<p id="index-2">Calling Knitro from a Java application is similar to using the
object-oriented interface in C++. The primary difference between the C++
and Java version of the object-oriented interface is in the syntax.
The Java function names are capitalized, and the functions
use <em>List&lt;&gt;</em> (implemented as <em>ArrayList&lt;&gt;</em>) for function arguments and
return values.</p>
<p>The Java object-oriented interface requires Java 1.6 and up.
The interface uses JNA (Java Native Access) to call the C Knitro callable
library and convert data and function signatures between Java and C,
and uses <code class="file docutils literal"><span class="pre">knitro.h</span></code> and the <code class="file docutils literal"><span class="pre">knitro.dll</span></code> dynamic library
(<code class="file docutils literal"><span class="pre">libknitro.so</span></code> on Linux; <code class="file docutils literal"><span class="pre">libknitro.dylib</span></code> on Mac OS X).</p>
<p>Examples of problem definitions and Knitro callbacks in Java can be found
in the example folders distributed with Knitro, and the source code
for the interface is provided for informational purposes.</p>
</div>
<div class="section" id="knitro-in-a-fortran-application">
<h2>Knitro in a Fortran application</h2>
<p id="index-3">Calling Knitro from a Fortran application follows the same outline
as a C application.     The optimization problem must be defined in terms of
arrays and constants that follow the Knitro API, and then the
Fortran version of <a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_init_problem" title="KTR_init_problem"><code class="xref c c-func docutils literal"><span class="pre">KTR_init_problem()</span></code></a> is called.      Fortran
integer and double precision types map directly to
C <em>int</em> and <em>double</em> types.</p>
<p>Fortran applications require wrapper functions written in C to
(1) isolate the <em>KTR_context</em> structure, which has no analog
in unstructured Fortran, (2) convert C function names into names
recognized by the Fortran linker, and (3) renumber array indices
to start from zero (the C convention used by Knitro) for applications
that follow the Fortran convention of starting from one.
The wrapper functions can be called from Fortran with exactly the same
arguments as their C language counterparts, except for the omission of the
<em>KTR_context</em> argument.</p>
<p>An example Fortran program and set of C wrappers is provided in
<code class="file docutils literal"><span class="pre">examples/Fortran</span></code>.
The example loads the matrix
sparsity of the optimization problem with indices that start numbering
from zero, and therefore requires no conversion from the Fortran convention
of numbering from one.  The C wrappers provided are sufficient for the
simple example, but do not implement all the functionality of the Knitro
callable library.       Users are free to write their own C wrapper routines, or
extend the example wrappers as needed.</p>
</div>
<div class="section" id="knitro-in-a-python-application">
<h2>Knitro in a Python application</h2>
<p id="index-4">Knitro provides a Python interface for the Knitro callable library functions defined
in <code class="file docutils literal"><span class="pre">knitro.h</span></code>. The Python API loads directly <code class="file docutils literal"><span class="pre">knitro.dll</span></code>
(<code class="file docutils literal"><span class="pre">libknitro.so</span></code> on Unix; <code class="file docutils literal"><span class="pre">libknitro.dylib</span></code> on Mac OS X). In this way Python
applications can create a Knitro solver instance and call Python methods that execute
Knitro functions. The Python form of Knitro is thread-safe, which means that a Python
application can create multiple instances of a Knitro solver in different threads, each
instance solving a different problem. This feature might be important in an application
that is deployed on a web server. However, please note that Python interpreters are usually not
thread safe so callbacks cannot be evaluated in parallel. Thus <a class="reference internal" href="../3_referenceManual/userOptions.html#par_concurrent_evals" title="par_concurrent_evals"><code class="xref c c-type docutils literal"><span class="pre">par_concurrent_evals</span></code></a> is
always initialized to 0/&#8217;no&#8217; in the Python interface, but may still be set to 1/&#8217;yes&#8217; by the user.</p>
<p>Calling Knitro from a Python application follows the same outline as a C application,
with the same methods.
C <em>int</em> and <em>double</em> types are automatically mapped into their Python counterparts (<em>int</em> and <em>float</em>).
C arrays are automatically mapped into Python list types.
C pointers are automatically mapped into single element lists
(used in particular for recovering objective function values).
Methods that accept <em>NULL</em> values in C also accept <em>None</em> values in Python.</p>
<p>Knitro accepts empty Python lists for C pointer arguments that are used as output.
In this case, the output value will automatically be appended to the list provided.
<em>None</em> can also be provided if the output value is not requested.</p>
<p>The optimization problem must be defined in terms of Python lists and constants
that follows the C API, and the Python version of <a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_init_problem" title="KTR_init_problem"><code class="xref c c-func docutils literal"><span class="pre">KTR_init_problem()</span></code></a> /
<a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_mip_init_problem" title="KTR_mip_init_problem"><code class="xref c c-func docutils literal"><span class="pre">KTR_mip_init_problem()</span></code></a> is then called.
Having defined the optimization problem, the Python version of <a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_solve" title="KTR_solve"><code class="xref c c-func docutils literal"><span class="pre">KTR_solve()</span></code></a> or
<a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_mip_solve" title="KTR_mip_solve"><code class="xref c c-func docutils literal"><span class="pre">KTR_mip_solve()</span></code></a> is called in callback mode or in reverse communications mode.
All Python methods have the same function prototype as in C, with the exception of
<a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_init_problem" title="KTR_init_problem"><code class="xref c c-func docutils literal"><span class="pre">KTR_init_problem()</span></code></a> / <a class="reference internal" href="../3_referenceManual/callableLibrary/API.html#KTR_mip_init_problem" title="KTR_mip_init_problem"><code class="xref c c-func docutils literal"><span class="pre">KTR_mip_init_problem()</span></code></a>, which do not require
arguments <em>m</em>, <em>nnzJ</em>, <em>nnzH</em>. These arguments are automatically inferred from the
lengths of the other list arguments.</p>
<p>To write a Python application, take a look at the sample programs in <code class="file docutils literal"><span class="pre">examples/Python</span></code>.
The call sequence for using Knitro is almost exactly the same as C applications that call
<code class="file docutils literal"><span class="pre">knitro.h</span></code> functions with a <em>KTR_context_ptr</em> object.</p>
<p>Python functions can be declared as callbacks for Knitro as long as they follow
the corresponding callback function prototypes (defined in <code class="file docutils literal"><span class="pre">knitro.h</span></code>).
The arguments passed by Knitro to these callbacks functions are mapped as follows.
C <em>int</em> and <em>double</em> types are automatically mapped into their Python counterparts
(<em>int</em> and <em>float</em>). C arrays and pointers are automatically mapped into Python lists.
Although the Python language makes it unnecessary, Python objects may be passed to the
callback function through the <em>userParams</em> argument.</p>
<p>The sample programs can be run directly from the command line after installing
<code class="file docutils literal"><span class="pre">knitro.py</span></code> (or making sure that <code class="file docutils literal"><span class="pre">knitro.py</span></code> is in the folder containing
the example source file).  The sample programs provided closely mirror the structural
form of the C callback and reverse communication examples.</p>
<p>The Knitro Python API supports Python versions 2.7 and 3.6.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="specialProblems.html" class="btn btn-neutral float-right" title="Special problem classes" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="callbacks.html" class="btn btn-neutral" title="Callbacks" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Artelys.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'10.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>